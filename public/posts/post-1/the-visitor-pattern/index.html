<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>The Visitor Pattern | Dmytro Chumakov</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="The Visitor Pattern In this article: What is a Visitor Pattern? What problems does it solve? Real-world code example What is a Visitor Pattern? The Visitor Pattern helps add new capabilities to a composite of objects. What problems does it solve? The Visitor Pattern helps solve following problems:
Separation of Concerns: The Visitor Pattern separates algorithms from the objects on which they operate. This allows for clean code organization by keeping algorithms and operations separate from the data structures they operate on.">
    <meta name="generator" content="Hugo 0.123.3">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/post-1/the-visitor-pattern/">
    

    <meta property="og:title" content="The Visitor Pattern" />
<meta property="og:description" content="The Visitor Pattern In this article: What is a Visitor Pattern? What problems does it solve? Real-world code example What is a Visitor Pattern? The Visitor Pattern helps add new capabilities to a composite of objects. What problems does it solve? The Visitor Pattern helps solve following problems:
Separation of Concerns: The Visitor Pattern separates algorithms from the objects on which they operate. This allows for clean code organization by keeping algorithms and operations separate from the data structures they operate on." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/post-1/the-visitor-pattern/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-01T08:01:22+03:00" />
<meta property="article:modified_time" content="2024-04-01T08:01:22+03:00" />

<meta itemprop="name" content="The Visitor Pattern">
<meta itemprop="description" content="The Visitor Pattern In this article: What is a Visitor Pattern? What problems does it solve? Real-world code example What is a Visitor Pattern? The Visitor Pattern helps add new capabilities to a composite of objects. What problems does it solve? The Visitor Pattern helps solve following problems:
Separation of Concerns: The Visitor Pattern separates algorithms from the objects on which they operate. This allows for clean code organization by keeping algorithms and operations separate from the data structures they operate on."><meta itemprop="datePublished" content="2024-04-01T08:01:22+03:00" />
<meta itemprop="dateModified" content="2024-04-01T08:01:22+03:00" />
<meta itemprop="wordCount" content="453">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="The Visitor Pattern"/>
<meta name="twitter:description" content="The Visitor Pattern In this article: What is a Visitor Pattern? What problems does it solve? Real-world code example What is a Visitor Pattern? The Visitor Pattern helps add new capabilities to a composite of objects. What problems does it solve? The Visitor Pattern helps solve following problems:
Separation of Concerns: The Visitor Pattern separates algorithms from the objects on which they operate. This allows for clean code organization by keeping algorithms and operations separate from the data structures they operate on."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Dmytro Chumakov
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">The Visitor Pattern</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2024-04-01T08:01:22+03:00">April 1, 2024</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id="the-visitor-pattern">The Visitor Pattern</h2>
<h3 id="in-this-article">In this article:</h3>
<ul>
<li>What is a Visitor Pattern?</li>
<li>What problems does it solve?</li>
<li>Real-world code example</li>
</ul>
<h3 id="what-is-a-visitor-pattern">What is a Visitor Pattern?</h3>
<blockquote>
<p>The Visitor Pattern helps add new capabilities to a composite of objects.
<img src="1.jpg" alt="alt"></p>
</blockquote>
<h3 id="what-problems-does-it-solve">What problems does it solve?</h3>
<p>The Visitor Pattern helps solve following problems:</p>
<ul>
<li><strong>Separation of Concerns</strong>: The Visitor Pattern separates algorithms from the objects on which they operate. This allows for clean code organization by keeping algorithms and operations separate from the data structures they operate on.</li>
<li><strong>Extensibility</strong>: It allows you to add new operations to existing object structures without modifying those structures. This is especially useful when dealing with complex object hierarchies where adding new functionality directly to the classes would lead to code bloat and tight coupling.</li>
<li><strong>Traversal of Object Structures</strong>: It provides a way to traverse complex object structures while performing some action on each element of the structure. This is particularly useful in scenarios where you need to process every element of a data structure in a specific order or with a specific algorithm.</li>
</ul>
<h3 id="real-world-code-example">Real-world code example</h3>
<pre tabindex="0"><code>// Element protocol representing the items on the menu
protocol MenuItem {
    func accept(visitor: OrderVisitor)
}

// Concrete item types
class Coffee: MenuItem {
    let name: String
    let price: Double
    
    init(name: String, price: Double) {
        self.name = name
        self.price = price
    }
    
    func accept(visitor: OrderVisitor) {
        visitor.visit(self)
    }
}

class Tea: MenuItem {
    let name: String
    let price: Double
    
    init(name: String, price: Double) {
        self.name = name
        self.price = price
    }
    
    func accept(visitor: OrderVisitor) {
        visitor.visit(self)
    }
}

class Pastry: MenuItem {
    let name: String
    let price: Double
    
    init(name: String, price: Double) {
        self.name = name
        self.price = price
    }
    
    func accept(visitor: OrderVisitor) {
        visitor.visit(self)
    }
}

// Visitor protocol defining the operations to be performed on menu items
protocol OrderVisitor {
    func visit(_ item: Coffee)
    func visit(_ item: Tea)
    func visit(_ item: Pastry)
}

// Concrete visitor implementing operations on menu items
class TotalCostVisitor: OrderVisitor {
    var totalCost = 0.0
    
    func visit(_ item: Coffee) {
        totalCost += item.price
    }
    
    func visit(_ item: Tea) {
        totalCost += item.price
    }
    
    func visit(_ item: Pastry) {
        totalCost += item.price
    }
}

class ItemDetailsVisitor: OrderVisitor {
    var details = &#34;&#34;
    
    func visit(_ item: Coffee) {
        details += &#34;Coffee: \(item.name), Price: $\(item.price)\n&#34;
    }
    
    func visit(_ item: Tea) {
        details += &#34;Tea: \(item.name), Price: $\(item.price)\n&#34;
    }
    
    func visit(_ item: Pastry) {
        details += &#34;Pastry: \(item.name), Price: $\(item.price)\n&#34;
    }
}

// Example usage
let items: [MenuItem] = [Coffee(name: &#34;Espresso&#34;, price: 2.5), Tea(name: &#34;Green Tea&#34;, price: 2.0), Pastry(name: &#34;Croissant&#34;, price: 3.0)]

let totalCostVisitor = TotalCostVisitor()
for item in items {
    item.accept(visitor: totalCostVisitor)
}
print(&#34;Total cost of the order: $\(totalCostVisitor.totalCost)&#34;)

let itemDetailsVisitor = ItemDetailsVisitor()
for item in items {
    item.accept(visitor: itemDetailsVisitor)
}
print(&#34;Order details:&#34;)
print(itemDetailsVisitor.details)
</code></pre><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Dmytro Chumakov 2024 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
