<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>LeetCode - 150 - Walls and Gates | Dmytro&#39;s Blog</title>
<meta name="keywords" content="LeetCode, 150, Walls and Gates, Swift">
<meta name="description" content="The problem
You are given an m*n 2D grid initialized with these three possible values:

-1 - A wall or obstacle.
0 - A gate.
INF - Infinity means an empty room. We use the value 2^31 - 1 = 2147483647 to represent INF.

Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with INF.
Assume the grid can only be traversed up, down, left, or right.">
<meta name="author" content="Dmytro Chumakov">
<link rel="canonical" href="http://localhost:1313/posts/leetcode-150-walls-and-gates/">
<meta name="google-site-verification" content="G-HZZ4JTFGDP">
<link crossorigin="anonymous" href="/assets/css/stylesheet.853b48c61a99e84b8a44302d8cf1d3e1678ce0d3b2171814dd75baab44c3aed9.css" integrity="sha256-hTtIxhqZ6EuKRDAtjPHT4WeM4NOyFxgU3XW6q0TDrtk=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/leetcode-150-walls-and-gates/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><style>
    @media screen and (min-width: 769px) {
         
        .post-content input[type="checkbox"]:checked ~ label > img {
            transform: scale(1.6);
            cursor: zoom-out;
            position: relative;
            z-index: 999;
        }
    
        .post-content img.zoomCheck {
            transition: transform 0.15s ease;
            z-index: 999;
            cursor: zoom-in;
        }
    }
    </style>
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-HZZ4JTFGDP"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-HZZ4JTFGDP');
        }
      </script><meta property="og:url" content="http://localhost:1313/posts/leetcode-150-walls-and-gates/">
  <meta property="og:site_name" content="Dmytro&#39;s Blog">
  <meta property="og:title" content="LeetCode - 150 - Walls and Gates">
  <meta property="og:description" content="The problem You are given an m*n 2D grid initialized with these three possible values:
-1 - A wall or obstacle. 0 - A gate. INF - Infinity means an empty room. We use the value 2^31 - 1 = 2147483647 to represent INF. Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with INF.
Assume the grid can only be traversed up, down, left, or right.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-11T08:04:42+03:00">
    <meta property="article:modified_time" content="2025-10-11T08:04:42+03:00">
    <meta property="article:tag" content="LeetCode">
    <meta property="article:tag" content="150">
    <meta property="article:tag" content="Walls and Gates">
    <meta property="article:tag" content="Swift">
      <meta property="og:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png">
<meta name="twitter:title" content="LeetCode - 150 - Walls and Gates">
<meta name="twitter:description" content="The problem
You are given an m*n 2D grid initialized with these three possible values:

-1 - A wall or obstacle.
0 - A gate.
INF - Infinity means an empty room. We use the value 2^31 - 1 = 2147483647 to represent INF.

Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with INF.
Assume the grid can only be traversed up, down, left, or right.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "LeetCode - 150 - Walls and Gates",
      "item": "http://localhost:1313/posts/leetcode-150-walls-and-gates/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "LeetCode - 150 - Walls and Gates",
  "name": "LeetCode - 150 - Walls and Gates",
  "description": "The problem You are given an m*n 2D grid initialized with these three possible values:\n-1 - A wall or obstacle. 0 - A gate. INF - Infinity means an empty room. We use the value 2^31 - 1 = 2147483647 to represent INF. Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with INF.\nAssume the grid can only be traversed up, down, left, or right.\n",
  "keywords": [
    "LeetCode", "150", "Walls and Gates", "Swift"
  ],
  "articleBody": "The problem You are given an m*n 2D grid initialized with these three possible values:\n-1 - A wall or obstacle. 0 - A gate. INF - Infinity means an empty room. We use the value 2^31 - 1 = 2147483647 to represent INF. Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with INF.\nAssume the grid can only be traversed up, down, left, or right.\nModify the grid in place.\nExamples Input: [ [2147483647,-1,0,2147483647], [2147483647,2147483647,2147483647,-1], [2147483647,-1,2147483647,-1], [0,-1,2147483647,2147483647] ] Output: [ [3,-1,0,1], [2,2,1,-1], [1,-1,2,-1], [0,-1,3,4] ] Input: [ [0,-1], [2147483647,2147483647] ] Output: [ [0,-1], [1,2] ] Constraints m == grid.length n == grid[i].length 1 \u003c= m, n \u003c= 100 grid[i][j] is one of {-1, 0, 2147483647} Explanation From the description of the problem, we learn that we are given an m*n grid where each position could have three possible values:\n-1 that represents a wall 0 that represents a gate INF that represents an empty room We also learned that we need to identify the nearest gate to the empty room (INF) and replace it with the distance from the nearest gate to the empty room. If we canâ€™t do that, we should fill it with INF.\nNow, letâ€™s look at the first example: If we start from the top right cell and we are trying to determine how far away the gate is from the empty room, you can see that itâ€™s only one position away from a gate. We canâ€™t go up or right because those positions are out of bounds, and we canâ€™t go down because we have a wall. If we start from the top left cell, we have three positions to the gate. If we start from the second row and second column and we are trying to find the distance to the bottom left gate, we will need three positions to get to this gate. But if you look at the third column of the second row, you can see that we have a gate with a closer distance of two. The brute force way to solve this problem is to use a backtracking algorithm and find the distance for every single position of the entire grid. This solution will work but it will take O(mn4^(m*n)), which is not very efficient.\nBreadth First Search Solution func wallsAndGates(_ grid: inout [[Int]]) { let rows = grid.count let cols = grid[0].count var visit: Set\u003c[Int]\u003e = [] func addRoom(_ r: Int, _ c: Int) { if (r \u003c 0 || r == rows || c \u003c 0 || c == cols || visit.contains([r, c]) || grid[r][c] == -1) { return } visit.insert([r, c]) q.append([r, c]) } var q: [[Int]] = [] for r in 0 ..\u003c rows { for c in 0 ..\u003c cols { if grid[r][c] == 0 { q.append([r, c]) visit.insert([r, c]) } } } var dist = 0 while !q.isEmpty { for _ in 0 ..\u003c q.count { let cell = q.removeFirst() let r = cell[0] let c = cell[1] grid[r][c] = dist addRoom(r + 1, c) addRoom(r - 1, c) addRoom(r, c + 1) addRoom(r, c - 1) } dist += 1 } } Explanation We can optimize our brute force solution by using the breadth first search algorithm. Letâ€™s look at an example when we start from the second row and first column position: We are going to visit all four directions and find what is the closest gate that we can get to. To avoid a scenario where we visit the same position twice, we are going to create a visited set. We canâ€™t achieve an O(m*n) time solution if we are going to do breadth first search from the rooms, but if we do BFS from the gates, we can mark all adjacent rooms with distance 1. You can see if we start calculating distance from the gate with the position of the first row and third column, we have an incorrect distance for the bottom left gate. To avoid this scenario, we are going to simultaneously do a BFS from both gates. When we do our BFS from the bottom left gate, we are not going to visit the second column because it has already been visited. Time/Space complexity Time complexity: O(m*n) Space complexity: O(m*n) Where m is the number of rows and n is the number of columns in the grid Thank you for reading! ðŸ˜Š ",
  "wordCount" : "742",
  "inLanguage": "en",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "2025-10-11T08:04:42+03:00",
  "dateModified": "2025-10-11T08:04:42+03:00",
  "author":{
    "@type": "Person",
    "name": "Dmytro Chumakov"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/leetcode-150-walls-and-gates/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dmytro's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Dmytro&#39;s Blog (Alt + H)">Dmytro&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>

        
        <button id="menu-trigger" aria-haspopup="menu" aria-label="Menu Button">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <ul class="menu hidden">
            <li>
                <a href="http://localhost:1313/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      LeetCode - 150 - Walls and Gates
    </h1>
    <div class="post-meta"><span title='2025-10-11 08:04:42 +0300 EEST'>October 11, 2025</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>Dmytro Chumakov</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#the-problem" aria-label="The problem">The problem</a><ul>
                        
                <li>
                    <a href="#examples" aria-label="Examples">Examples</a></li>
                <li>
                    <a href="#constraints" aria-label="Constraints">Constraints</a></li>
                <li>
                    <a href="#explanation" aria-label="Explanation">Explanation</a></li></ul>
                </li>
                <li>
                    <a href="#breadth-first-search-solution" aria-label="Breadth First Search Solution">Breadth First Search Solution</a><ul>
                        
                <li>
                    <a href="#explanation-1" aria-label="Explanation">Explanation</a></li>
                <li>
                    <a href="#timespace-complexity" aria-label="Time/Space complexity">Time/Space complexity</a></li>
                <li>
                    <a href="#thank-you-for-reading-" aria-label="Thank you for reading! ðŸ˜Š">Thank you for reading! ðŸ˜Š</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="the-problem">The problem<a hidden class="anchor" aria-hidden="true" href="#the-problem">#</a></h3>
<p>You are given an <code>m*n</code> 2D <code>grid</code> initialized with these three possible values:</p>
<ul>
<li><code>-1</code> - A wall or obstacle.</li>
<li><code>0</code> - A gate.</li>
<li><code>INF</code> - Infinity means an empty room. We use the value <code>2^31 - 1 = 2147483647</code> to represent <code>INF</code>.</li>
</ul>
<p>Fill each empty room with the distance to its nearest gate. If itâ€™s impossible to reach the gate, it should be filled with <code>INF</code>.</p>
<p>Assume the grid can only be traversed up, down, left, or right.</p>
<p>Modify the <code>grid</code> in place.</p>
<h4 id="examples">Examples<a hidden class="anchor" aria-hidden="true" href="#examples">#</a></h4>
<p>
    
    <input type="checkbox" id="zoomCheck-d05b8" hidden>
    <label for="zoomCheck-d05b8">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/ex1.png#center" alt="alt image" 
             />
    </label>
</p>
<pre tabindex="0"><code>Input: [
  [2147483647,-1,0,2147483647],
  [2147483647,2147483647,2147483647,-1],
  [2147483647,-1,2147483647,-1],
  [0,-1,2147483647,2147483647]
]

Output: [
  [3,-1,0,1],
  [2,2,1,-1],
  [1,-1,2,-1],
  [0,-1,3,4]
]
</code></pre><pre tabindex="0"><code>Input: [
  [0,-1],
  [2147483647,2147483647]
]

Output: [
  [0,-1],
  [1,2]
]
</code></pre><h4 id="constraints">Constraints<a hidden class="anchor" aria-hidden="true" href="#constraints">#</a></h4>
<ul>
<li>m == grid.length</li>
<li>n == grid[i].length</li>
<li>1 &lt;= m, n &lt;= 100</li>
<li>grid[i][j] is one of {-1, 0, 2147483647}</li>
</ul>
<h4 id="explanation">Explanation<a hidden class="anchor" aria-hidden="true" href="#explanation">#</a></h4>
<p>From the description of the problem, we learn that we are given an <code>m*n</code> grid where each position could have three possible values:</p>
<ul>
<li><code>-1</code> that represents a wall</li>
<li><code>0</code> that represents a gate</li>
<li><code>INF</code> that represents an empty room</li>
</ul>
<p>We also learned that we need to identify the nearest gate to the empty room (<code>INF</code>) and replace it with the distance from the nearest gate to the empty room. If we canâ€™t do that, we should fill it with <code>INF</code>.</p>
<p>Now, letâ€™s look at the first example:

    
    <input type="checkbox" id="zoomCheck-08c37" hidden>
    <label for="zoomCheck-08c37">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111.png#center" alt="alt image" 
             />
    </label>
</p>
<ul>
<li>If we start from the top right cell and we are trying to determine how far away the gate is from the empty room, you can see that itâ€™s only one position away from a gate. We canâ€™t go up or right because those positions are out of bounds, and we canâ€™t go down because we have a wall.

    
    <input type="checkbox" id="zoomCheck-c28cd" hidden>
    <label for="zoomCheck-c28cd">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-1.png#center" alt="alt image" 
             />
    </label>
</li>
<li>If we start from the top left cell, we have three positions to the gate.

    
    <input type="checkbox" id="zoomCheck-32130" hidden>
    <label for="zoomCheck-32130">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-2.png#center" alt="alt image" 
             />
    </label>
</li>
<li>If we start from the second row and second column and we are trying to find the distance to the <code>bottom left gate</code>, we will need three positions to get to this gate.

    
    <input type="checkbox" id="zoomCheck-968b2" hidden>
    <label for="zoomCheck-968b2">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-3.png#center" alt="alt image" 
             />
    </label>
</li>
<li>But if you look at the <code>third column</code> of the <code>second row</code>, you can see that we have a gate with a closer distance of two.</li>
</ul>
<p>The brute force way to solve this problem is to use a backtracking algorithm and find the distance for every single position of the entire grid. This solution will work but it will take O(m<em>n</em>4^(m*n)), which is not very efficient.</p>
<h3 id="breadth-first-search-solution">Breadth First Search Solution<a hidden class="anchor" aria-hidden="true" href="#breadth-first-search-solution">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">wallsAndGates</span><span class="p">(</span><span class="kc">_</span> <span class="n">grid</span><span class="p">:</span> <span class="kr">inout</span> <span class="p">[[</span><span class="nb">Int</span><span class="p">]])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">rows</span> <span class="p">=</span> <span class="n">grid</span><span class="p">.</span><span class="bp">count</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">cols</span> <span class="p">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="bp">count</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nv">visit</span><span class="p">:</span> <span class="n">Set</span><span class="o">&lt;</span><span class="p">[</span><span class="nb">Int</span><span class="p">]</span><span class="o">&gt;</span> <span class="p">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">func</span> <span class="nf">addRoom</span><span class="p">(</span><span class="kc">_</span> <span class="n">r</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">c</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">r</span> <span class="p">==</span> <span class="n">rows</span> <span class="o">||</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">c</span> <span class="p">==</span> <span class="n">cols</span> <span class="o">||</span> <span class="n">visit</span><span class="p">.</span><span class="bp">contains</span><span class="p">([</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span> <span class="o">||</span> <span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="p">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">visit</span><span class="p">.</span><span class="bp">insert</span><span class="p">([</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nv">q</span><span class="p">:</span> <span class="p">[[</span><span class="nb">Int</span><span class="p">]]</span> <span class="p">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">r</span> <span class="k">in</span> <span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="n">rows</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">c</span> <span class="k">in</span> <span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="n">cols</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">q</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">                <span class="n">visit</span><span class="p">.</span><span class="bp">insert</span><span class="p">([</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nv">dist</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="bp">isEmpty</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="kc">_</span> <span class="k">in</span> <span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="n">q</span><span class="p">.</span><span class="bp">count</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nv">cell</span> <span class="p">=</span> <span class="n">q</span><span class="p">.</span><span class="n">removeFirst</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="n">cell</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nv">c</span> <span class="p">=</span> <span class="n">cell</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="p">=</span> <span class="n">dist</span>
</span></span><span class="line"><span class="cl">            <span class="n">addRoom</span><span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">addRoom</span><span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">addRoom</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">addRoom</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">dist</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="explanation-1">Explanation<a hidden class="anchor" aria-hidden="true" href="#explanation-1">#</a></h4>
<p>We can optimize our brute force solution by using the breadth first search algorithm.
Letâ€™s look at an example when we start from the second row and first column position:

    
    <input type="checkbox" id="zoomCheck-e432e" hidden>
    <label for="zoomCheck-e432e">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-4.png#center" alt="alt image" 
             />
    </label>
</p>
<ul>
<li>We are going to visit all four directions and find what is the closest gate that we can get to.</li>
<li>To avoid a scenario where we visit the same position twice, we are going to create a <code>visited</code> set.

    
    <input type="checkbox" id="zoomCheck-2a32e" hidden>
    <label for="zoomCheck-2a32e">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-5.png#center" alt="alt image" 
             />
    </label>

We canâ€™t achieve an <code>O(m*n)</code> time solution if we are going to do breadth first search from the rooms, but if we do BFS from the gates, we can mark all adjacent rooms with distance <code>1</code>. You can see if we start calculating distance from the gate with the position of the first row and third column, we have an incorrect distance for the bottom left gate.

    
    <input type="checkbox" id="zoomCheck-39c21" hidden>
    <label for="zoomCheck-39c21">
        <img class="zoomCheck" loading="lazy" decoding="async" 
            src="images/111-6.png#center" alt="alt image" 
             />
    </label>

To avoid this scenario, we are going to simultaneously do a BFS from both gates.
When we do our BFS from the bottom left gate, we are not going to visit the second column because it has already been visited.</li>
</ul>
<h4 id="timespace-complexity">Time/Space complexity<a hidden class="anchor" aria-hidden="true" href="#timespace-complexity">#</a></h4>
<ul>
<li>Time complexity: O(m*n)</li>
<li>Space complexity: O(m*n)</li>
<li>Where <code>m</code> is the number of rows and <code>n</code> is the number of columns in the grid</li>
</ul>
<h4 id="thank-you-for-reading-">Thank you for reading! ðŸ˜Š<a hidden class="anchor" aria-hidden="true" href="#thank-you-for-reading-">#</a></h4>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/leetcode/">LeetCode</a></li>
      <li><a href="http://localhost:1313/tags/150/">150</a></li>
      <li><a href="http://localhost:1313/tags/walls-and-gates/">Walls and Gates</a></li>
      <li><a href="http://localhost:1313/tags/swift/">Swift</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/leetcode-150-rotting-oranges/">
    <span class="title">Â« Prev</span>
    <br>
    <span>LeetCode - 150 - Rotting Oranges</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/leetcode-150-max-area-of-island/">
    <span class="title">Next Â»</span>
    <br>
    <span>LeetCode - 150 - Max Area of Island</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on x"
            href="https://x.com/intent/tweet/?text=LeetCode%20-%20150%20-%20Walls%20and%20Gates&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f&amp;hashtags=LeetCode%2c150%2cWallsandGates%2cSwift">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f&amp;title=LeetCode%20-%20150%20-%20Walls%20and%20Gates&amp;summary=LeetCode%20-%20150%20-%20Walls%20and%20Gates&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f&title=LeetCode%20-%20150%20-%20Walls%20and%20Gates">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on whatsapp"
            href="https://api.whatsapp.com/send?text=LeetCode%20-%20150%20-%20Walls%20and%20Gates%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on telegram"
            href="https://telegram.me/share/url?text=LeetCode%20-%20150%20-%20Walls%20and%20Gates&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share LeetCode - 150 - Walls and Gates on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=LeetCode%20-%20150%20-%20Walls%20and%20Gates&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fleetcode-150-walls-and-gates%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer><div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'dmytros-blog';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Dmytro&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script>
    
    
    let b = document.querySelector("#menu-trigger")
    let m = document.querySelector(".menu")
    b.addEventListener("click", function () {
        m.classList.toggle("hidden")
    });
    
    document.body.addEventListener('click', function (event) {
        if (!b.contains(event.target)) {
            m.classList.add("hidden")
        }
    });
    
</script>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
